<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Blog Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="shortcut icon" href="{{ url_for('static', filename='ico/favicon.ico') }}">

    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container">
      <div class="row">        
        <div class="col-md-3">
          <div class="logo">
            <p>Logo</p>
          </div>
          <div class="project-side">
            <hr />
            <ul class="project-list">
              <li><a href="#"  class="selected">Project 1 && Project 751</a>
              </li>
              <li><a href="#">Project 2</a></li>
              <li><a href="#">Project 3</a></li>            
            </ul>
            <hr />            
            <a class="btn btn-default btn-md" id="addProject">Add project</a>        
            <button class="btn btn-default btn-md" id="addRoom">Add room</button>  
          </div>
        </div>

        <div class="col-md-8">
          <div class="settings">
            <p>Settings</p>
          </div>
          <hr>
          <ul id="room-objects">
            <li class="room-object">
              <form class="form-inline">      
                <select name="" id="" class="form-control input-md">
                  <option value="">Wall</option>
                  <option value="">Window</option>
                  <option value="">Door</option>
                </select>
                <input type="number" id="objWidth" class="form-control input-md calc-object" min="0" step="0.01"/>
                <label for="objHeight"/>X</label>
                <input type="number" id="objHeight" class="form-control input-md calc-object" min="0" step="0.01"/>
                <select name="" id="" class="form-control input-md calc-object">
                  <option value="">+</option>
                  <option value="">-</option>
                </select>
                <button type="button" class="btn btn-default btn-md delete-room-object"><span class="glyphicon glyphicon-trash"></span> Delete</button>     
              </form>
            </li>
          </ul>
          <hr style="margin-top: 12px;" />
          <form action="" class="form-inline">
            <button type="button" class="btn btn-default btn-md" id="addNewRoomObject"><span class="glyphicon glyphicon-plus"></span>
             Add room object</button>      
          </form>
          <hr />
          <div class="summary">
            <div class="summary-area">Total area: <b>100</b></div>
            <div class="summary-cost">Total cost: <b>1000</b></div>
          </div>
        </div>
      </div><!-- /.row -->

    </div><!-- /.container -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $("#addNewRoomObject").click(function() {
          $("#room-objects").
            append("<li class=\"room-object\">" + $(".room-object").html() + "</li>");
        });

        $(document).on('click','button.delete-room-object',function(){
          $(this).parents(".room-object").remove();
        });
        $(document).on('click', '#addProject', function(){
          $(".project-list").
            append('<li><a href="#">Project 2</a></li>');
        });
        $(document).on('click', '#addRoom', function(){
          var subProjectList = $(".project-list a.selected");
          var ul = subProjectList.next();
          if (ul.attr("class") !== undefined){
            ul.append('<li><a href="#">Room</a></li>');
          } else {
            subProjectList.after('<ul class="project-list-sub"><li><a href="#">Room</a></li></ul>');
          }
        });

        $(document).on('click', 'ul.project-list li a', function() {
          $('ul.project-list li a').removeClass('selected');
          $(this).addClass('selected');
        });

        $(document).on('change', '.calc-object', function() {
          var sum = 0;
          $('input[type=number].calc-object').each(function(index) {
            if (index % 2 === 0) {
              var height = parseFloat($(this).next('input[type=number]').val());
              alert(height);
              var width = parseFloat($(this).val());
              alert(width);
              var sign = $(this).next('select option:selected').text();
              alert(sign);
              if (!isNaN(width) && !isNaN(height)){
                if (sign === '+') {
                  sum += width * height;                  
                } else {
                  sum -= width * height;
                }
              }
            }            
          })
          $('.summary .summary-area b').text(sum);
        });
    </script>
  </body>
</html>
